<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Evolving Chakra System with Culling and Memory Management</title><style>body,html{margin:0;padding:0;width:100%;height:100%;overflow:hidden;background:#000}canvas{display:block;width:100%;height:100%}#fullscreenButton{position:fixed;bottom:20px;right:20px;padding:10px 20px;background-color:#fff;border:none;border-radius:5px;cursor:pointer;font-size:16px;z-index:10}</style></head><body><canvas id="c"></canvas><button id="fullscreenButton">Enter Fullscreen</button><script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script><script>const scene=new THREE.Scene(),camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,0.1,1000);camera.position.z=8;const renderer=new THREE.WebGLRenderer({antialias:true,canvas:document.getElementById("c")});renderer.setSize(window.innerWidth,window.innerHeight);const chakraColors=["#FF0000","#FF7F00","#FFFF00","#00FF00","#0000FF","#4B0082","#8B00FF"],geometry=new THREE.CircleGeometry(1,16),material=new THREE.MeshBasicMaterial({color:"#FFFFFF",wireframe:true,transparent:true,opacity:0.7}),chakras=[],intentions=["seekResource","avoidConflict","formAlliance","trade","explore","wander","warp","pattern","spiral"];let globalSpeed=0.03,populationCap=20;function createChakra(i,level=1){if(chakras.length>=populationCap)return;const chakra=new THREE.Mesh(geometry.clone(),material.clone());chakra.material.color.set(chakraColors[i%chakraColors.length]);chakra.position.set(Math.sin(i*Math.PI/3.5)*3,Math.cos(i*Math.PI/3.5)*3,(i%2===0?-1:1)*Math.random()*2);scene.add(chakra);chakras.push({mesh:chakra,intention:intentions[Math.floor(Math.random()*intentions.length)],speed:globalSpeed,direction:1,scaleDirection:1,level:level,experience:0,evolutionThreshold:5*level,warpFactor:Math.random()*0.05,patternFactor:Math.random()*0.05,behaviorScore:100,cullThreshold:20})}for(let i=0;i<7;i++){createChakra(i)}function evolveChakra(chakra){chakra.level++;chakra.speed+=0.01;chakra.mesh.scale.set(chakra.level,chakra.level,1);chakra.mesh.material.color.set(chakraColors[chakra.level%chakraColors.length]);chakra.evolutionThreshold*=1.5;chakra.experience=0;if(chakra.level>=3&&chakras.length<populationCap){createChakra(chakras.length,1)}}function cullChakras(){for(let i=chakras.length-1;i>=0;i--){if(chakras[i].behaviorScore<chakras[i].cullThreshold){scene.remove(chakras[i].mesh);chakras.splice(i,1);cleanupMemory()}}}function cleanupMemory(){chakras.length=chakras.length}function adjustParameters(){if(chakras.length>populationCap*0.75){chakras.forEach(chakra=>{chakra.cullThreshold+=5;chakra.evolutionThreshold*=1.2})}else if(chakras.length<populationCap*0.5){chakras.forEach(chakra=>{chakra.cullThreshold-=5;chakra.evolutionThreshold/=1.2})}}function interpretSignal(chakra,signal){chakra.experience+=0.1;if(chakra.experience>=chakra.evolutionThreshold){evolveChakra(chakra)}switch(signal){case"seekResource":chakra.mesh.position.x+=chakra.scaleDirection*0.05;chakra.mesh.position.y+=chakra.scaleDirection*0.05;chakra.behaviorScore+=1;break;case"avoidConflict":chakra.mesh.position.x-=chakra.scaleDirection*0.05;chakra.mesh.position.y-=chakra.scaleDirection*0.05;chakra.behaviorScore+=1;break;case"formAlliance":chakra.mesh.position.x+=Math.sin(Date.now()*0.001*chakra.speed);chakra.mesh.position.y+=Math.cos(Date.now()*0.001*chakra.speed);chakra.behaviorScore+=2;break;case"warp":warpMovement(chakra);chakra.behaviorScore+=1;break;case"pattern":patternMovement(chakra);chakra.behaviorScore+=1;break;case"spiral":spiralMovement(chakra);chakra.behaviorScore+=1;break;default:chakra.behaviorScore-=0.5;}}function warpMovement(chakra){const time=Date.now()*chakra.warpFactor;chakra.mesh.position.x+=Math.sin(time*chakra.speed)*0.05;chakra.mesh.position.y+=Math.sin(time*chakra.speed)*0.05}function patternMovement(chakra){const time=Date.now()*chakra.patternFactor;chakra.mesh.position.x+=Math.sin(time)*0.05;chakra.mesh.position.y+=Math.cos(time*2)*0.05}function spiralMovement(chakra){const time=Date.now()*chakra.speed;chakra.mesh.position.x+=Math.sin(time)*0.05*time*0.001;chakra.mesh.position.y+=Math.cos(time)*0.05*time*0.001}function updateChakras(){chakras.forEach(chakra=>{chakra.mesh.rotation.z+=chakra.speed*chakra.direction;chakra.mesh.scale.x+=chakra.scaleDirection*0.005;chakra.mesh.scale.y=chakra.mesh.scale.x;if(chakra.mesh.scale.x>1.2||chakra.mesh.scale.x<0.8)chakra.scaleDirection*=-1;interpretSignal(chakra,chakra.intention)});cullChakras();adjustParameters()}function animate(){requestAnimationFrame(animate);updateChakras();renderer.render(scene,camera)}animate();fullscreenButton.addEventListener("click",()=>{if(!document.fullscreenElement){document.documentElement.requestFullscreen();fullscreenButton.textContent="Exit Fullscreen"}else{if(document.exitFullscreen){document.exitFullscreen();fullscreenButton.textContent="Enter Fullscreen"}}});</script></body></html>
