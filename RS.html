<html lang="en"><head><meta charset="viewport" content="width=device-width, initial-scale=1.0"><title>Reveal Reality with Adjustments</title><style>body,html{margin:0;padding:0;display:flex;justify-content:center;align-items:center;height:100vh;background-color:black;overflow:hidden}video,canvas{position:absolute;top:0;left:0;width:100%;height:100%}#fullscreenButton{position:absolute;top:10px;right:10px;padding:10px 15px;background-color:rgba(0,0,0,0.7);color:white;border:none;cursor:pointer;font-size:16px;border-radius:5px;display:block;z-index:10}#screenshotButton{position:absolute;bottom:10%;right:10%;width:80px;height:80px;border-radius:50%;background-color:rgba(255,255,255,0.1);border:3px solid rgba(255,255,255,0.4);cursor:pointer;z-index:10}#menuButton{position:absolute;bottom:20%;right:10%;width:60px;height:60px;border-radius:50%;background-color:rgba(255,0,0,0.3);border:2px solid rgba(255,0,0,0.5);cursor:pointer;z-index:10}#controls{position:absolute;top:10%;right:0;width:300px;height:400px;padding:10px;background-color:rgba(0,0,0,0.7);color:white;z-index:20;overflow-y:scroll;display:none}#frameRateSlider,#contrastSlider,#grainSlider,#textureSlider,#saturationSlider,#glowSlider,#tintSlider,#edgeSlider{width:250px}</style></head><body><video id="video" autoplay></video><canvas id="canvas"></canvas><button id="fullscreenButton">Toggle Fullscreen</button><div id="screenshotButton"></div><div id="menuButton"></div><div id="controls"><label>Frame Rate: <input type="range" id="frameRateSlider" min="1" max="1000" step="1" value="50"><span id="frameRateValue">50ms (20fps)</span></label><br><label>Contrast: <input type="range" id="contrastSlider" min="0" max="200" step="0.1" value="100"><span id="contrastValue">100%</span></label><br><label>Grain: <input type="range" id="grainSlider" min="0" max="100" step="0.1" value="0"><span id="grainValue">0%</span></label><br><label>Texture: <input type="range" id="textureSlider" min="-10" max="10" step="0.1" value="0"><span id="textureValue">0</span></label><br><label>Saturation: <input type="range" id="saturationSlider" min="0" max="200" step="0.1" value="100"><span id="saturationValue">100%</span></label><br><label>Glow: <input type="range" id="glowSlider" min="0" max="100" step="1" value="0"><span id="glowValue">0%</span></label><br><label>Tint: <input type="color" id="tintSlider" value="#ffffff"></label><br><label>Edge Detection: <input type="range" id="edgeSlider" min="0" max="10" step="0.1" value="0"><span id="edgeValue">0</span></label></div><script>const video=document.getElementById('video'),canvas=document.getElementById('canvas'),context=canvas.getContext('2d'),fullscreenButton=document.getElementById('fullscreenButton'),screenshotButton=document.getElementById('screenshotButton'),menuButton=document.getElementById('menuButton'),controls=document.getElementById('controls'),frameRateSlider=document.getElementById('frameRateSlider'),frameRateValue=document.getElementById('frameRateValue'),contrastSlider=document.getElementById('contrastSlider'),contrastValue=document.getElementById('contrastValue'),grainSlider=document.getElementById('grainSlider'),grainValue=document.getElementById('grainValue'),textureSlider=document.getElementById('textureSlider'),textureValue=document.getElementById('textureValue'),saturationSlider=document.getElementById('saturationSlider'),saturationValue=document.getElementById('saturationValue'),glowSlider=document.getElementById('glowSlider'),glowValue=document.getElementById('glowValue'),tintSlider=document.getElementById('tintSlider'),edgeSlider=document.getElementById('edgeSlider'),edgeValue=document.getElementById('edgeValue');let previousFrame=null,subtleMovementThreshold=1,differenceAmplification=10,frameInterval=50,frameIntervalID=null;navigator.mediaDevices.getUserMedia({video:{facingMode:{exact:"environment"}}}).then(stream=>{video.srcObject=stream,video.play()}).catch(err=>{console.error("Error accessing the rear camera: ",err)}),video.addEventListener("loadedmetadata",()=>{const videoWidth=video.videoWidth,videoHeight=video.videoHeight;canvas.width=videoWidth,canvas.height=videoHeight});function trackFrameDifferences(currentFrame,previousFrame){const width=canvas.width,height=canvas.height,noiseData=context.createImageData(width,height),noisePixels=noiseData.data;for(let i=0;i<currentFrame.data.length;i+=4){const rDiff=Math.abs(currentFrame.data[i]-previousFrame.data[i])*differenceAmplification,gDiff=Math.abs(currentFrame.data[i+1]-previousFrame.data[i+1])*differenceAmplification,bDiff=Math.abs(currentFrame.data[i+2]-previousFrame.data[i+2])*differenceAmplification,motionMagnitude=rDiff+gDiff+bDiff;motionMagnitude>subtleMovementThreshold?(noisePixels[i]=Math.min(255,rDiff),noisePixels[i+1]=Math.min(255,gDiff),noisePixels[i+2]=Math.min(255,bDiff),noisePixels[i+3]=255):(noisePixels[i]=0,noisePixels[i+1]=0,noisePixels[i+2]=0,noisePixels[i+3]=255)}return noiseData}function applyAdjustments(imageData){const pixels=imageData.data,contrast=contrastSlider.value/100,grainAmount=parseInt(grainSlider.value),textureAmount=parseInt(textureSlider.value),saturation=saturationSlider.value/100,glow=parseInt(glowSlider.value),tintColor=tintSlider.value,edgeStrength=parseInt(edgeSlider.value),factor=259*(contrast+255)/(255*(259-contrast)),tintRGB=hexToRgb(tintColor);for(let i=0;i<pixels.length;i+=4){let gray=.299*pixels[i]+.587*pixels[i+1]+.114*pixels[i+2];pixels[i]=truncate(factor*(pixels[i]-128)+128),pixels[i+1]=truncate(factor*(pixels[i+1]-128)+128),pixels[i+2]=truncate(factor*(pixels[i+2]-128)+128);pixels[i]=(pixels[i]-gray)*saturation+gray,pixels[i+1]=(pixels[i+1]-gray)*saturation+gray,pixels[i+2]=(pixels[i+2]-gray)*saturation+gray;if(grainAmount>0){const grain=(Math.random()-.5)*grainAmount;pixels[i]+=grain,pixels[i+1]+=grain,pixels[i+2]+=grain}pixels[i]+=tintRGB.r/4,pixels[i+1]+=tintRGB.g/4,pixels[i+2]+=tintRGB.b/4;if(glow>0)pixels[i]=Math.min(255,pixels[i]+glow),pixels[i+1]=Math.min(255,pixels[i+1]+glow),pixels[i+2]=Math.min(255,pixels[i+2]+glow);if(edgeStrength>0){let edge=Math.abs(pixels[i]-pixels[i+4])*edgeStrength;pixels[i]=edge,pixels[i+1]=edge,pixels[i+2]=edge}}return imageData}function truncate(value){return Math.max(0,Math.min(255,value))}function hexToRgb(hex){const bigint=parseInt(hex.slice(1),16);return{r:(bigint>>16)&255,g:(bigint>>8)&255,b:bigint&255}}function toggleFullscreen(){document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen()}fullscreenButton.addEventListener("click",toggleFullscreen);menuButton.addEventListener("click",()=>{controls.style.display=controls.style.display==="none"?"block":"none"});function handleUserActivity(){fullscreenButton.style.display="block",clearTimeout(fullscreenButton._timeout),fullscreenButton._timeout=setTimeout(()=>{fullscreenButton.style.display="none"},3e3)}function takeScreenshot(){const screenshotCanvas=document.createElement("canvas");screenshotCanvas.width=canvas.width,screenshotCanvas.height=canvas.height;const screenshotContext=screenshotCanvas.getContext("2d");screenshotContext.drawImage(canvas, 0, 0);const link=document.createElement("a");link.href=screenshotCanvas.toDataURL("image/png");link.download=generateRandomFilename()+".png";link.click()}function generateRandomFilename(){const chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let filename="";for(let i=0;i<10;i++){filename+=chars.charAt(Math.floor(Math.random()*chars.length))}return filename}screenshotButton.addEventListener("click",takeScreenshot);function updateFrameRate(){frameInterval=parseInt(frameRateSlider.value);const fps=(1000/frameInterval).toFixed(2);frameRateValue.textContent=`${frameInterval}ms (${fps}fps)`;frameIntervalID&&clearInterval(frameIntervalID),frameIntervalID=setInterval(()=>{context.drawImage(video,0,0,canvas.width,canvas.height);let currentFrame=context.getImageData(0,0,canvas.width,canvas.height);applyAdjustments(currentFrame);previousFrame&&(context.putImageData(trackFrameDifferences(currentFrame,previousFrame),0,0)),previousFrame=currentFrame},frameInterval)}frameRateSlider.addEventListener("input",updateFrameRate),contrastSlider.addEventListener("input",()=>{contrastValue.textContent=contrastSlider.value+"%"}),grainSlider.addEventListener("input",()=>{grainValue.textContent=grainSlider.value+"%"}),textureSlider.addEventListener("input",()=>{textureValue.textContent=textureSlider.value}),saturationSlider.addEventListener("input",()=>{saturationValue.textContent=saturationSlider.value+"%"}),glowSlider.addEventListener("input",()=>{glowValue.textContent=glowSlider.value+"%"}),edgeSlider.addEventListener("input",()=>{edgeValue.textContent=edgeSlider.value}),updateFrameRate();</script></body></html>
