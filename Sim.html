<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Habitat Tank</title><style>@import url('https://fonts.googleapis.com/css2?family=Pirata+One&display=swap');body,html{margin:0;padding:0;overflow:hidden;background:#000;display:flex;flex-direction:column;align-items:center;height:100vh;}canvas{border:2px solid #ff69b4;border-radius:10px;box-shadow:0 0 20px rgba(255,105,180,0.8);}#controls{position:absolute;top:20px;display:flex;gap:10px;}button,input{padding:10px;background:#ff69b4;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background 0.3s;}button:hover,input:hover{background:#ff3399;}input{width:80px;text-align:center;}#messenger{position:absolute;bottom:20px;width:80%;display:flex;gap:10px;}#messages{flex:1;background:#333;padding:10px;border-radius:5px;color:#fff;max-height:200px;overflow-y:auto;}#command{flex:2;padding:10px;}#send{padding:10px;background:#ff69b4;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background 0.3s;}#send:hover{background:#ff3399;}h1{position:absolute;top:60px;font-family:'Pirata One',cursive;color:#ff69b4;text-shadow:0 0 10px #ff69b4,0 0 20px #ff69b4,0 0 30px #ff69b4;}#toggle-controls{display:none;position:absolute;top:20px;right:20px;background:#ff69b4;color:#fff;border:none;border-radius:5px;cursor:pointer;padding:10px;}#toggle-controls:hover{background:#ff3399;}</style></head><body><h1>Habitat Tank</h1><button id="toggle-controls" onclick="toggleControls()">Controls</button><div id="controls"><button onclick="addTree()">Add Tree</button><button onclick="addPerson()">Add Person</button><label for="speed">Speed:</label><input type="number" id="speed" value="1" min="1" max="10"></div><canvas id="canvas" width="800" height="600"></canvas><div id="messenger"><div id="messages"></div><input type="text" id="command" placeholder="Enter command"><button id="send" onclick="sendCommand()">Send</button></div><script>const canvas=document.getElementById('canvas');const ctx=canvas.getContext('2d');const width=canvas.width;const height=canvas.height;const entities=[];let time=0;let evolveInterval=1000;class Tree{constructor(x,y){this.x=x;this.y=y;}draw(){ctx.fillStyle='#228B22';ctx.beginPath();ctx.moveTo(this.x,this.y);ctx.lineTo(this.x-20,this.y+50);ctx.lineTo(this.x+20,this.y+50);ctx.closePath();ctx.fill();ctx.fillStyle='#8B4513';ctx.fillRect(this.x-5,this.y+50,10,20);}}class Person{constructor(x,y){this.x=x;this.y=y;this.speed=1;this.energy=100;this.target=null;}draw(){ctx.fillStyle='#FFD700';ctx.beginPath();ctx.arc(this.x,this.y,10,0,Math.PI*2);ctx.fill();ctx.fillStyle='#000';ctx.fillRect(this.x-5,this.y+10,10,30);}move(){if(this.target){const dx=this.target.x-this.x;const dy=this.target.y-this.y;const dist=Math.sqrt(dx*dx+dy*dy);if(dist>1){this.x+=dx/dist*this.speed;this.y+=dy/dist*this.speed;}else{this.target=null;}}else{const speed=parseFloat(document.getElementById('speed').value);this.x+=(Math.random()-0.5)*speed*this.speed;this.y+=(Math.random()-0.5)*speed*this.speed;if(this.x<0)this.x=0;if(this.x>width)this.x=width;if(this.y<0)this.y=0;if(this.y>height)this.y=height;}this.energy-=0.1;if(this.energy<=0)this.die();}die(){const index=entities.indexOf(this);if(index>-1)entities.splice(index,1);logMessage('A person has died.');}interact(){for(const entity of entities){if(entity instanceof Tree){const dx=this.x-entity.x;const dy=this.y-entity.y;if(Math.sqrt(dx*dx+dy*dy)<50){this.energy+=50;const index=entities.indexOf(entity);if(index>-1)entities.splice(index,1);logMessage('A person has interacted with a tree and gained energy.');break;}}}}build(){if(this.energy>=200){const x=this.x+Math.random()*50-25;const y=this.y+Math.random()*50-25;entities.push(new Tree(x,y));this.energy-=100;logMessage('A person has built a new tree.');}}}function addTree(){const x=Math.random()*width;const y=Math.random()*(height-100);entities.push(new Tree(x,y));logMessage('Tree added at ('+x.toFixed(1)+','+y.toFixed(1)+')');}function addPerson(){const x=Math.random()*width;const y=Math.random()*(height-100);entities.push(new Person(x,y));logMessage('Person added at ('+x.toFixed(1)+','+y.toFixed(1)+')');}function draw(){ctx.clearRect(0,0,width,height);ctx.fillStyle='rgba(0,0,0,0.1)';ctx.fillRect(0,0,width,height);for(const entity of entities){entity.draw();if(entity instanceof Person){entity.move();entity.interact();entity.build();}}time+=1;requestAnimationFrame(draw);}function evolve(){for(const entity of entities){if(entity instanceof Person){entity.speed+=Math.random()*0.1-0.05;if(entity.speed<0.1)entity.speed=0.1;if(entity.speed>5)entity.speed=5;}}}function logMessage(message){const messages=document.getElementById('messages');const messageElement=document.createElement('div');messageElement.textContent=message;messages.appendChild(messageElement);messages.scrollTop=messages.scrollHeight;}function sendCommand(){const command=document.getElementById('command').value.toLowerCase();document.getElementById('command').value='';const [action, ...params] = command.split(' ');if(action==='add'){if(params.includes('tree')){addTree();}else if(params.includes('person')){addPerson();}}else if(action==='set'){if(params.includes('speed')){const speed=parseFloat(params[params.length-1]);if(!isNaN(speed)){document.getElementById('speed').value=speed;logMessage('Speed set to '+speed);}}else if(params.includes('interval')){const interval=parseInt(params[params.length-1]);if(!isNaN(interval)){clearInterval(evolveIntervalId);evolveInterval=interval;evolveIntervalId=setInterval(evolve,evolveInterval);logMessage('Evolution interval set to '+interval);}}}else if(action==='move'){const index=parseInt(params[0]);const x=parseFloat(params[1]);const y=parseFloat(params[2]);if(!isNaN(index)&&!isNaN(x)&&!isNaN(y)&&entities[index] instanceof Person){entities[index].target={x,y};logMessage('Person '+index+' moving to ('+x+','+y+')');}}else if(action==='calculate'){const expression=params.join(' ');try{const result=eval(expression);logMessage('Result: '+result);}catch(e){logMessage('Error: Invalid expression');}}else{logMessage('Unknown command: '+command);}}function toggleControls(){const controls=document.getElementById('controls');const messenger=document.getElementById('messenger');const toggleButton=document.getElementById('toggle-controls');if(controls.style.display==='none'){controls.style.display='flex';messenger.style.display='flex';toggleButton.style.display='none';}else{controls.style.display='none';messenger.style.display='none';toggleButton.style.display='block';}}canvas.addEventListener('click',()=>{const toggleButton=document.getElementById('toggle-controls');toggleButton.style.display=toggleButton.style.display==='none'?'block':'none';});let evolveIntervalId=setInterval(evolve,evolveInterval);draw();</script></body></html>
